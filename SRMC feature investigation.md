SRMC Outline and thoughts (parking lot)

## Musings and Feature Ideation

Rely on the VESC project for communication and PC interface software

include the remote control?

Current Sensors repeat and reuse?

interboard communication?

can this be done a a single board.

it depends on the power level

how much does the DC Bus differ between technologies (BLDC, PMSM, Synchoronous REluctance)

How much odes the diodes and switch sizes differe for the same amount of power considering the control techniques and the amount of itme spent in chop control and freewheeling?

Chop Control, Soft Chop Control and Hard Chop, Alternating HS/LS Soft Chop Option,

Angle Control

Virtual Flux Control, Flux Virtualization Control

Find white papers that discuss each type of control strategy and base the strategy on those white papers.

IGBT and IGBT protection

Why IGBTs for SRM?

Power Supplies on board, use the STM32 prototype starter kit as a reference for what to do power supply wise and keep the transformer on the prototype board for felxibility

Power supplies for gate drivers or get gate drivers that can provide 15 V control power to gate

board interconnectivity?

Capacitor DC Bus Capactior optimization and sizing

Diodes that are free-wheeling capable and allow the circuit to spend ample time in the free-wheeling zone that means comprobable current capability to the IGBT not equal but comprobable for a period of time (establish 30-60 seconds?)

is it possible to project the performance of an SR motor across a single electrical cycle for the entire motor how much of the torque is generated by the culmination of the phases vs is it just the torqu that can be produced across a single phase and the continued production of torque a result of the coordination of firing of phases in time?

Control Strategies

Power Range

Form Factor

Power Electronics

Features

Chop Control

Does chop control require hysteresis current controller? or is that a synonym for

chop control so I am overcomplicating this.

either way a task list is required.

Build a prototype in Arduino first matter of fact this can be the defacto standard for production of code and prototyping is that it is done in either STMD32 starter kit or just performed in Arduiino.

List includes:

how to program an Arduino

What tools need installed if any

Write a hysteresis current loop

Can I generate a signal with the electronics I have currently in front of me?

How to read an input

How to produce a PWM

How to write a hysteresis program

write in C and or C++

What tools does STM32 have how much does it differ.

Hysteresis Current Controller Code

Writing Hysteresis Current Controller in C++ (from Brave LEO)

Based on the provided search results, I’ll outline a step-by-step approach to implement a hysteresis current controller in C++. This example will be a simplified representation, and you may need to adapt it to your specific application.

Assumptions:

1.  1\. The controller will operate on a sampled data system, where the input voltage (e.g., temperature) is measured at regular intervals (e.g., every 10 milliseconds).
2.  2\. The controller will output a discrete current value based on the hysteresis logic.

Variables and Constants:

1.  1\. input_voltage (e.g., temperature): the measured input value
2.  2\. hyst_off (e.g., 30°C): the lower threshold for turning off the current
3.  3\. hyst_on (e.g., 40°C): the upper threshold for turning on the current
4.  4\. margin (e.g., 2°C): the deadband width around the thresholds
5.  5\. current_state (e.g., boolean): the current state of the controller (on/off)
6.  6\. output_current (e.g., double): the output current value

Hysteresis Logic:

1.  1\. Initialize current_state to a default value (e.g., off).
2.  2\. In each sampling interval:
3.  3\. Store the updated current_state for the next sampling interval.

C++ Code Example:

\#includeconstdouble hyst_off = 30.0; // lower thresholdconstdouble hyst_on = 40.0; // upper thresholdconstdouble margin = 2.0; // deadband widthbool current_state = false; // initialize to offdouble output_current = 0.0; voidhysteresisController(double input_voltage){ if (input_voltage \>= hyst_on + margin) { current_state = true; // turn on } elseif (input_voltage \<= hyst_off - margin) { current_state = false; // turn off } if (current_state != previous_state) { // update output current based on the new stateif (current_state) { output_current = calculateOnCurrent(input_voltage); } else { output_current = calculateOffCurrent(); } } previous_state = current_state; }

Notes:

1.  1\. This example assumes a simple bang-bang control strategy, where the output current is either fully on or fully off. You may need to modify the logic to accommodate more complex control strategies.
2.  2\. The calculateOnCurrent and calculateOffCurrent functions are placeholders for your specific implementation of calculating the output current values.
3.  3\. The previous_state variable is used to track the previous state of the controller, allowing for proper hysteresis behavior. You may want to use a more robust method to store and update the state, such as a finite state machine.

This code snippet provides a basic outline for implementing a hysteresis current controller in C++. You’ll need to adapt it to your specific application and requirements.

Speed Control

Need a PI Control Loop for establishing and maintaining a fixed speed

You will need multiple PI Kp and Ki values for different speed ranges

due to the changing amount of torque required to maintain speed in different speed ranges or changing current required or changing amount of time required to build up the required current to obtain the same or required amount of torque per rpm range.

Methods used to determine the Ki and Kp values are Trial and Error, Bode Plot Method (? how does that work)?

What questions do I have for speed control or hysteresis Current Control Loop? How do I know how long to commutate for?

Can I base it on the rotor speed and angle?How did we do that at KMC?there were only three sensor positions and they were on in six different modes or something like that I think. it was

S One, Two, Three, Four

A On, Off, On, Off

B On, On, Off, Off

C Off, On, On, Off,

References

TMS320F28335
